<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chuck-A-Luck Web</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
            color: #0f0;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        .game-box {
            border: 2px solid #0f0;
            padding: 20px;
            background: #111;
            border-radius: 5px;
        }
        h1 {
            color: #ff0;
            text-align: center;
            text-shadow: 0 0 10px #ff0;
        }
        #output {
            background: #000;
            border: 1px solid #0f0;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            margin: 15px 0;
            white-space: pre-wrap;
            font-size: 14px;
        }
        .input-area {
            display: flex;
            gap: 10px;
        }
        input {
            flex: 1;
            padding: 10px;
            background: #000;
            color: #0f0;
            border: 1px solid #0f0;
            font-family: 'Courier New', monospace;
        }
        button {
            padding: 10px 20px;
            background: #333;
            color: #0f0;
            border: 1px solid #0f0;
            cursor: pointer;
            font-family: 'Courier New', monospace;
        }
        button:hover {
            background: #444;
        }
        .money {
            color: #ff0;
            font-weight: bold;
        }
        .controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="game-box">
        <h1>üé≤ CHUCK-A-LUCK üé≤</h1>

        <div id="output">–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨ –í CHUCK-A-LUCK!

CHOOSE A NUMBER FROM 1 TO 6. I WILL ROLL 3 DICE.
IF YOUR NUMBER MATCHES 1 DIE, I PAY OFF EVEN MONEY.
TWO DICE, 2:1    3 DICE, 3:1

–£ –≤–∞—Å: <span class="money">$500</span>
        </div>

        <div class="input-area">
            <input type="text" id="userInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É..." autofocus>
            <button onclick="processCommand()">–í–í–û–î</button>
        </div>

        <div class="controls">
            <button onclick="newGame()">–ù–û–í–ê–Ø –ò–ì–†–ê</button>
            <button onclick="showHelp()">–ü–û–ú–û–©–¨</button>
            <button onclick="showRules()">–ü–†–ê–í–ò–õ–ê</button>
        </div>
    </div>

    <script>
        let money = 500;
        let gameState = 'bet'; // 'bet' or 'number'
        let currentBet = 0;
        let targetNumber = 0;

        function addToOutput(text) {
            const output = document.getElementById('output');
            output.innerHTML += '\n' + text;
            output.scrollTop = output.scrollHeight;
        }

        function updateMoneyDisplay() {
            const output = document.getElementById('output');
            const lines = output.innerHTML.split('\n');
            for (let i = 0; i < lines.length; i++) {
                if (lines[i].includes('–£ –≤–∞—Å:')) {
                    lines[i] = `–£ –≤–∞—Å: <span class="money">$${money}</span>`;
                    break;
                }
            }
            output.innerHTML = lines.join('\n');
        }

        function rollDice() {
            return [
                Math.floor(Math.random() * 6) + 1,
                Math.floor(Math.random() * 6) + 1,
                Math.floor(Math.random() * 6) + 1
            ];
        }

        function processCommand() {
            const input = document.getElementById('userInput');
            const cmd = input.value.trim();

            if (!cmd) return;

            addToOutput('> ' + cmd);

            if (cmd.toLowerCase() === 'help') {
                showHelp();
            } else if (cmd.toLowerCase() === 'rules') {
                showRules();
            } else if (cmd.toLowerCase() === 'quit') {
                addToOutput('–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É!');
                input.disabled = true;
                return;
            } else if (gameState === 'bet') {
                const bet = parseInt(cmd);
                if (isNaN(bet) || bet <= 0) {
                    addToOutput('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞!');
                } else if (bet > money) {
                    addToOutput('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!');
                } else {
                    currentBet = bet;
                    gameState = 'number';
                    addToOutput(`–°—Ç–∞–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞: $${bet}`);
                    addToOutput('–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 6:');
                }
            } else if (gameState === 'number') {
                const num = parseInt(cmd);
                if (isNaN(num) || num < 1 || num > 6) {
                    addToOutput('–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 6!');
                } else {
                    targetNumber = num;
                    playRound();
                }
            }

            input.value = '';
            input.focus();
        }

        function playRound() {
            const dice = rollDice();
            addToOutput(`–ö—É–±–∏–∫–∏: ${dice[0]}, ${dice[1]}, ${dice[2]}`);

            const matches = dice.filter(d => d === targetNumber).length;
            addToOutput(`–í–∞—à–µ —á–∏—Å–ª–æ: ${targetNumber}, —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π: ${matches}`);

            if (matches === 0) {
                money -= currentBet;
                addToOutput(`–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ $${currentBet}`);
            } else if (matches === 1) {
                money += currentBet;
                addToOutput(`–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ $${currentBet}`);
            } else if (matches === 2) {
                money += currentBet * 2;
                addToOutput(`–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ $${currentBet * 2}`);
            } else if (matches === 3) {
                money += currentBet * 3;
                addToOutput(`–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ $${currentBet * 3}`);
            }

            updateMoneyDisplay();

            if (money <= 0) {
                addToOutput('üíÄ –ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê! –í—ã –±–∞–Ω–∫—Ä–æ—Ç! üíÄ');
                document.getElementById('userInput').disabled = true;
            } else {
                gameState = 'bet';
                addToOutput('\n--- –ù–û–í–´–ô –†–ê–£–ù–î ---');
                addToOutput(`–£ –≤–∞—Å: $${money}. –°–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É:`);
            }
        }

        function newGame() {
            money = 500;
            gameState = 'bet';
            currentBet = 0;
            targetNumber = 0;
            document.getElementById('output').innerHTML = '–ù–û–í–ê–Ø –ò–ì–†–ê!\n\n–£ –≤–∞—Å: <span class="money">$500</span>';
            document.getElementById('userInput').disabled = false;
            document.getElementById('userInput').focus();
        }

        function showHelp() {
            addToOutput('\n=== –ü–û–ú–û–©–¨ ===');
            addToOutput('1. –°–Ω–∞—á–∞–ª–∞ –≤–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Å—Ç–∞–≤–∫–∏');
            addToOutput('2. –ó–∞—Ç–µ–º –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 6');
            addToOutput('3. –ö–æ–º–∞–Ω–¥—ã: help, rules, quit');
            addToOutput('4. –î–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã –Ω–∞–∂–º–∏—Ç–µ "–ù–û–í–ê–Ø –ò–ì–†–ê"');
        }

        function showRules() {
            addToOutput('\n=== –ü–†–ê–í–ò–õ–ê ===');
            addToOutput('‚Ä¢ –Ø –±—Ä–æ—Å–∞—é 3 –∫—É–±–∏–∫–∞');
            addToOutput('‚Ä¢ –ï—Å–ª–∏ –≤–∞—à–µ —á–∏—Å–ª–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç:');
            addToOutput('  1 –∫—É–±–∏–∫: –≤—ã–∏–≥—Ä—ã—à = —Å—Ç–∞–≤–∫–∞ √ó1');
            addToOutput('  2 –∫—É–±–∏–∫–∞: –≤—ã–∏–≥—Ä—ã—à = —Å—Ç–∞–≤–∫–∞ √ó2');
            addToOutput('  3 –∫—É–±–∏–∫–∞: –≤—ã–∏–≥—Ä—ã—à = —Å—Ç–∞–≤–∫–∞ √ó3');
            addToOutput('‚Ä¢ –ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π = –ø—Ä–æ–∏–≥—Ä—ã—à —Å—Ç–∞–≤–∫–∏');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter
        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                processCommand();
            }
        });

        // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å
        document.getElementById('userInput').focus();
    </script>
</body>
</html>